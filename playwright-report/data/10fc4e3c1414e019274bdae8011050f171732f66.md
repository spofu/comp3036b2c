# Test info

- Name: Product Discovery and Search >> Product search performance and pagination
- Location: C:\Users\henry\OneDrive\Documents\uni\ICT-S4\COMP3036\Major\comp3036b2c\tests\e2e\products\optimized-products.spec.ts:233:7

# Error details

```
TimeoutError: page.goto: Timeout 10000ms exceeded.
Call log:
  - navigating to "http://localhost:3000/search?q=test", waiting until "load"

    at C:\Users\henry\OneDrive\Documents\uni\ICT-S4\COMP3036\Major\comp3036b2c\tests\e2e\products\optimized-products.spec.ts:234:16
```

# Test source

```ts
  134 |         await compareBtn1.click();
  135 |       }
  136 |       
  137 |       // Add second product to comparison
  138 |       await products.nth(1).hover();
  139 |       const compareBtn2 = products.nth(1).locator('[data-testid="compare-button"]');
  140 |       if (await compareBtn2.isVisible()) {
  141 |         await compareBtn2.click();
  142 |       }
  143 |       
  144 |       // View comparison
  145 |       const viewCompareBtn = page.locator('[data-testid="view-comparison"]');
  146 |       if (await viewCompareBtn.isVisible()) {
  147 |         await viewCompareBtn.click();
  148 |         await expect(page.locator('[data-testid="product-comparison"]')).toBeVisible();
  149 |       }
  150 |     }
  151 |     
  152 |     // Step 2: Test wishlist functionality
  153 |     await page.goto('/');
  154 |     const firstProduct = products.first();
  155 |     await firstProduct.hover();
  156 |     
  157 |     const wishlistBtn = firstProduct.locator('[data-testid="wishlist-button"]');
  158 |     if (await wishlistBtn.isVisible()) {
  159 |       await wishlistBtn.click();
  160 |       
  161 |       // Verify added to wishlist
  162 |       await expect(wishlistBtn).toHaveClass(/active|added/);
  163 |       
  164 |       // View wishlist
  165 |       const wishlistLink = page.locator('[data-testid="wishlist-link"]');
  166 |       if (await wishlistLink.isVisible()) {
  167 |         await wishlistLink.click();
  168 |         await expect(page.locator('[data-testid="wishlist-items"]')).toBeVisible();
  169 |       }
  170 |     }
  171 |   });
  172 |
  173 |   test('Mobile product browsing experience', async ({ page }) => {
  174 |     // Set mobile viewport
  175 |     await page.setViewportSize({ width: 375, height: 667 });
  176 |     
  177 |     await page.goto('/');
  178 |     await page.waitForLoadState('networkidle');
  179 |     
  180 |     // Step 1: Test mobile navigation
  181 |     const mobileMenuToggle = page.locator('[data-testid="mobile-menu-toggle"]');
  182 |     if (await mobileMenuToggle.isVisible()) {
  183 |       await mobileMenuToggle.click();
  184 |       await expect(page.locator('[data-testid="mobile-menu"]')).toBeVisible();
  185 |       
  186 |       // Test category navigation on mobile
  187 |       const categoriesLink = page.locator('[data-testid="mobile-categories"]');
  188 |       if (await categoriesLink.isVisible()) {
  189 |         await categoriesLink.click();
  190 |       }
  191 |       
  192 |       // Close mobile menu
  193 |       await page.locator('[data-testid="mobile-menu-close"]').click();
  194 |     }
  195 |     
  196 |     // Step 2: Test mobile product grid
  197 |     const productGrid = page.locator('[data-testid="product-grid"]');
  198 |     await expect(productGrid).toBeVisible();
  199 |     
  200 |     // Products should be displayed in mobile layout
  201 |     const products = page.locator('[data-testid="product-card"]');
  202 |     expect(await products.count()).toBeGreaterThan(0);
  203 |     
  204 |     // Step 3: Test mobile search
  205 |     const mobileSearchToggle = page.locator('[data-testid="mobile-search-toggle"]');
  206 |     if (await mobileSearchToggle.isVisible()) {
  207 |       await mobileSearchToggle.click();
  208 |       
  209 |       const mobileSearchInput = page.locator('[data-testid="mobile-search-input"]');
  210 |       await mobileSearchInput.fill('test');
  211 |       await page.keyboard.press('Enter');
  212 |       
  213 |       await page.waitForLoadState('networkidle');
  214 |     }
  215 |     
  216 |     // Step 4: Test mobile product detail
  217 |     await products.first().click();
  218 |     
  219 |     // Should show mobile-optimized product detail
  220 |     await expect(page.locator('[data-testid="product-detail"]')).toBeVisible();
  221 |     
  222 |     // Test mobile image swiping if implemented
  223 |     const imageGallery = page.locator('[data-testid="mobile-image-gallery"]');
  224 |     if (await imageGallery.isVisible()) {
  225 |       // Swipe gesture simulation
  226 |       await imageGallery.hover();
  227 |       await page.mouse.down();
  228 |       await page.mouse.move(100, 0);
  229 |       await page.mouse.up();
  230 |     }
  231 |   });
  232 |
  233 |   test('Product search performance and pagination', async ({ page }) => {
> 234 |     await page.goto('/search?q=test');
      |                ^ TimeoutError: page.goto: Timeout 10000ms exceeded.
  235 |     await page.waitForLoadState('networkidle');
  236 |     
  237 |     // Step 1: Test search performance
  238 |     const startTime = Date.now();
  239 |     
  240 |     const searchInput = page.locator('[data-testid="search-input"]');
  241 |     await searchInput.fill('shirt');
  242 |     await page.keyboard.press('Enter');
  243 |     
  244 |     await page.waitForLoadState('networkidle');
  245 |     const endTime = Date.now();
  246 |     
  247 |     // Search should complete within reasonable time
  248 |     expect(endTime - startTime).toBeLessThan(3000);
  249 |     
  250 |     // Step 2: Test pagination
  251 |     const pagination = page.locator('[data-testid="pagination"]');
  252 |     if (await pagination.isVisible()) {
  253 |       const nextButton = page.locator('[data-testid="pagination-next"]');
  254 |       if (await nextButton.isVisible() && !await nextButton.isDisabled()) {
  255 |         await nextButton.click();
  256 |         await page.waitForLoadState('networkidle');
  257 |         
  258 |         // URL should update with page parameter
  259 |         expect(page.url()).toContain('page=2');
  260 |         
  261 |         // Products should load
  262 |         const products = page.locator('[data-testid="product-card"]');
  263 |         expect(await products.count()).toBeGreaterThan(0);
  264 |       }
  265 |     }
  266 |     
  267 |     // Step 3: Test infinite scroll (if implemented)
  268 |     const loadMoreButton = page.locator('[data-testid="load-more"]');
  269 |     if (await loadMoreButton.isVisible()) {
  270 |       const initialProductCount = await page.locator('[data-testid="product-card"]').count();
  271 |       
  272 |       await loadMoreButton.click();
  273 |       await page.waitForLoadState('networkidle');
  274 |       
  275 |       const newProductCount = await page.locator('[data-testid="product-card"]').count();
  276 |       expect(newProductCount).toBeGreaterThan(initialProductCount);
  277 |     }
  278 |   });
  279 | });
  280 |
```