# Test info

- Name: Checkout and Payment System >> Guest checkout flow
- Location: C:\Users\henry\OneDrive\Documents\uni\ICT-S4\COMP3036\Major\comp3036b2c\tests\e2e\checkout\optimized-checkout.spec.ts:119:7

# Error details

```
TimeoutError: page.goto: Timeout 10000ms exceeded.
Call log:
  - navigating to "http://localhost:3000/", waiting until "load"

    at C:\Users\henry\OneDrive\Documents\uni\ICT-S4\COMP3036\Major\comp3036b2c\tests\e2e\checkout\optimized-checkout.spec.ts:121:16
```

# Page snapshot

```yaml
- banner:
  - navigation:
    - link "CLOOOOTHES":
      - /url: /
      - paragraph: CLOOOOTHES
    - list
    - textbox "Search products..."
    - link "Shopping Cart":
      - /url: /cart
      - img "Shopping Cart"
    - text: Loading...
- main:
  - paragraph: Loading products...
- contentinfo:
  - contentinfo:
    - heading "CLOOOOTHES" [level=3]
    - paragraph: Discover the latest trends in fashion with our curated collections for men, women, and kids.
    - link "Facebook":
      - /url: "#"
    - link "Instagram":
      - /url: "#"
    - link "Twitter":
      - /url: "#"
    - heading "Shop" [level=3]
    - list:
      - listitem:
        - link "Shop our collection.":
          - /url: /
    - heading "Support" [level=3]
    - list:
      - listitem:
        - link "Contact Us":
          - /url: /contact
      - listitem:
        - link "FAQ":
          - /url: /faq
      - listitem:
        - link "Shipping & Returns":
          - /url: /shipping
      - listitem:
        - link "Size Guide":
          - /url: /size-guide
      - listitem:
        - link "Track Order":
          - /url: /track-order
    - heading "Contact" [level=3]
    - paragraph:
      - img
      - text: 123 Fashion Street, London, UK
    - paragraph:
      - img
      - text: +44 1234 567890
    - paragraph:
      - img
      - text: support@ecommercetype.com
    - text: VISA MC AMEX PayPal Apple
    - paragraph: Â© 2025 E-Commerce Type Shii. All rights reserved.
    - link "Privacy Policy":
      - /url: /privacy
    - link "Terms of Service":
      - /url: /terms
    - link "Returns Policy":
      - /url: /returns
```

# Test source

```ts
   21 |     await page.click('[data-testid="add-to-cart"]');
   22 |     
   23 |     // Step 2: Navigate to checkout
   24 |     await page.click('[data-testid="cart-button"]');
   25 |     await page.click('[data-testid="checkout-button"]');
   26 |     await page.waitForURL('/checkout');
   27 |     
   28 |     // Step 3: Fill shipping information
   29 |     await page.fill('[data-testid="shipping-name"]', testAddresses.valid.name);
   30 |     await page.fill('[data-testid="shipping-email"]', testUsers.validUser.email);
   31 |     await page.fill('[data-testid="shipping-phone"]', testAddresses.valid.phone);
   32 |     await page.fill('[data-testid="shipping-street"]', testAddresses.valid.street);
   33 |     await page.fill('[data-testid="shipping-city"]', testAddresses.valid.city);
   34 |     await page.fill('[data-testid="shipping-state"]', testAddresses.valid.state);
   35 |     await page.fill('[data-testid="shipping-zip"]', testAddresses.valid.zipCode);
   36 |     await page.selectOption('[data-testid="shipping-country"]', testAddresses.valid.country);
   37 |     
   38 |     // Step 4: Select shipping method
   39 |     const shippingMethods = page.locator('[data-testid="shipping-method"]');
   40 |     if (await shippingMethods.count() > 0) {
   41 |       await shippingMethods.first().check();
   42 |     }
   43 |     
   44 |     // Step 5: Fill payment information
   45 |     await page.fill('[data-testid="card-number"]', testPayment.card.cardNumber);
   46 |     await page.fill('[data-testid="card-expiry"]', testPayment.card.expiryDate);
   47 |     await page.fill('[data-testid="card-cvv"]', testPayment.card.cvv);
   48 |     await page.fill('[data-testid="card-name"]', testPayment.card.cardholderName);
   49 |     
   50 |     // Step 6: Review order
   51 |     await expect(page.locator('[data-testid="order-summary"]')).toBeVisible();
   52 |     await expect(page.locator('[data-testid="order-total"]')).toBeVisible();
   53 |     
   54 |     // Step 7: Place order
   55 |     await page.click('[data-testid="place-order"]');
   56 |     
   57 |     // Step 8: Verify order confirmation
   58 |     await page.waitForURL('/order-confirmation');
   59 |     await expect(page.locator('[data-testid="order-confirmation"]')).toBeVisible();
   60 |     await expect(page.locator('[data-testid="order-number"]')).toBeVisible();
   61 |     
   62 |     // Verify order appears in order history
   63 |     await page.goto('/orders');
   64 |     await expect(page.locator('[data-testid="order-history"]')).toBeVisible();
   65 |   });
   66 |
   67 |   test('Checkout form validation and error handling', async ({ page }) => {
   68 |     await helpers.loginUser(testUsers.validUser);
   69 |     
   70 |     // Add item and go to checkout
   71 |     await page.goto('/');
   72 |     const products = page.locator('[data-testid="product-card"]');
   73 |     await products.first().click();
   74 |     await page.click('[data-testid="add-to-cart"]');
   75 |     await page.click('[data-testid="cart-button"]');
   76 |     await page.click('[data-testid="checkout-button"]');
   77 |     
   78 |     // Step 1: Test empty form validation
   79 |     await page.click('[data-testid="place-order"]');
   80 |     
   81 |     // Should show validation errors
   82 |     await expect(page.locator('[data-testid="validation-error"]')).toBeVisible();
   83 |     
   84 |     // Step 2: Test invalid email format
   85 |     await page.fill('[data-testid="shipping-email"]', 'invalid-email');
   86 |     await page.click('[data-testid="place-order"]');
   87 |     
   88 |     const emailError = page.locator('[data-testid="email-error"]');
   89 |     if (await emailError.isVisible()) {
   90 |       expect(await emailError.textContent()).toContain('valid email');
   91 |     }
   92 |     
   93 |     // Step 3: Test invalid credit card
   94 |     await page.fill('[data-testid="shipping-email"]', testUsers.validUser.email);
   95 |     await page.fill('[data-testid="card-number"]', '1234');
   96 |     await page.click('[data-testid="place-order"]');
   97 |     
   98 |     const cardError = page.locator('[data-testid="card-error"]');
   99 |     if (await cardError.isVisible()) {
  100 |       expect(await cardError.textContent()).toContain('card number');
  101 |     }
  102 |     
  103 |     // Step 4: Test missing required fields
  104 |     const requiredFields = [
  105 |       '[data-testid="shipping-name"]',
  106 |       '[data-testid="shipping-street"]',
  107 |       '[data-testid="shipping-city"]',
  108 |       '[data-testid="shipping-zip"]',
  109 |     ];
  110 |     
  111 |     for (const field of requiredFields) {
  112 |       await page.fill(field, '');
  113 |     }
  114 |     
  115 |     await page.click('[data-testid="place-order"]');
  116 |     await expect(page.locator('[data-testid="validation-error"]')).toBeVisible();
  117 |   });
  118 |
  119 |   test('Guest checkout flow', async ({ page }) => {
  120 |     // Step 1: Add items to cart as guest
> 121 |     await page.goto('/');
      |                ^ TimeoutError: page.goto: Timeout 10000ms exceeded.
  122 |     const products = page.locator('[data-testid="product-card"]');
  123 |     await products.first().click();
  124 |     await page.click('[data-testid="add-to-cart"]');
  125 |     
  126 |     // Step 2: Proceed to checkout
  127 |     await page.click('[data-testid="cart-button"]');
  128 |     await page.click('[data-testid="checkout-button"]');
  129 |     
  130 |     // Should be prompted to login or continue as guest
  131 |     const guestCheckoutButton = page.locator('[data-testid="guest-checkout"]');
  132 |     if (await guestCheckoutButton.isVisible()) {
  133 |       await guestCheckoutButton.click();
  134 |     }
  135 |     
  136 |     // Step 3: Fill guest information
  137 |     await page.fill('[data-testid="guest-email"]', 'guest@example.com');
  138 |     await page.fill('[data-testid="guest-name"]', 'Guest User');
  139 |     
  140 |     // Continue with shipping and payment as normal
  141 |     await page.fill('[data-testid="shipping-street"]', testAddresses.valid.street);
  142 |     await page.fill('[data-testid="shipping-city"]', testAddresses.valid.city);
  143 |     await page.fill('[data-testid="shipping-state"]', testAddresses.valid.state);
  144 |     await page.fill('[data-testid="shipping-zip"]', testAddresses.valid.zipCode);
  145 |     
  146 |     await page.fill('[data-testid="card-number"]', testPayment.card.cardNumber);
  147 |     await page.fill('[data-testid="card-expiry"]', testPayment.card.expiryDate);
  148 |     await page.fill('[data-testid="card-cvv"]', testPayment.card.cvv);
  149 |     
  150 |     // Step 4: Place order
  151 |     await page.click('[data-testid="place-order"]');
  152 |     
  153 |     // Should complete successfully
  154 |     const orderSuccess = page.locator('[data-testid="order-confirmation"]');
  155 |     const orderError = page.locator('[data-testid="order-error"]');
  156 |     
  157 |     // Either success or specific error should be shown
  158 |     const hasSuccess = await orderSuccess.isVisible();
  159 |     const hasError = await orderError.isVisible();
  160 |     
  161 |     expect(hasSuccess || hasError).toBe(true);
  162 |   });
  163 |
  164 |   test('Multiple payment methods and billing addresses', async ({ page }) => {
  165 |     await helpers.loginUser(testUsers.validUser);
  166 |     
  167 |     // Setup: Add item and go to checkout
  168 |     await page.goto('/');
  169 |     const products = page.locator('[data-testid="product-card"]');
  170 |     await products.first().click();
  171 |     await page.click('[data-testid="add-to-cart"]');
  172 |     await page.click('[data-testid="cart-button"]');
  173 |     await page.click('[data-testid="checkout-button"]');
  174 |     
  175 |     // Fill shipping info
  176 |     await page.fill('[data-testid="shipping-name"]', testAddresses.valid.name);
  177 |     await page.fill('[data-testid="shipping-email"]', testUsers.validUser.email);
  178 |     await page.fill('[data-testid="shipping-street"]', testAddresses.valid.street);
  179 |     await page.fill('[data-testid="shipping-city"]', testAddresses.valid.city);
  180 |     await page.fill('[data-testid="shipping-state"]', testAddresses.valid.state);
  181 |     await page.fill('[data-testid="shipping-zip"]', testAddresses.valid.zipCode);
  182 |     
  183 |     // Step 1: Test different billing address
  184 |     const differentBillingCheckbox = page.locator('[data-testid="different-billing"]');
  185 |     if (await differentBillingCheckbox.isVisible()) {
  186 |       await differentBillingCheckbox.check();
  187 |       
  188 |       // Fill billing address
  189 |       await page.fill('[data-testid="billing-street"]', testAddresses.international.street);
  190 |       await page.fill('[data-testid="billing-city"]', testAddresses.international.city);
  191 |       await page.fill('[data-testid="billing-state"]', testAddresses.international.state);
  192 |       await page.fill('[data-testid="billing-zip"]', testAddresses.international.zipCode);
  193 |       await page.selectOption('[data-testid="billing-country"]', testAddresses.international.country);
  194 |     }
  195 |     
  196 |     // Step 2: Test PayPal payment (if available)
  197 |     const paypalButton = page.locator('[data-testid="paypal-payment"]');
  198 |     if (await paypalButton.isVisible()) {
  199 |       await paypalButton.click();
  200 |       
  201 |       // Mock PayPal flow (would normally redirect)
  202 |       const mockPaypalSuccess = page.locator('[data-testid="paypal-success"]');
  203 |       if (await mockPaypalSuccess.isVisible()) {
  204 |         await mockPaypalSuccess.click();
  205 |       }
  206 |     } else {
  207 |       // Step 3: Test credit card payment
  208 |       await page.click('[data-testid="credit-card-payment"]');
  209 |       await page.fill('[data-testid="card-number"]', testPayment.card.cardNumber);
  210 |       await page.fill('[data-testid="card-expiry"]', testPayment.card.expiryDate);
  211 |       await page.fill('[data-testid="card-cvv"]', testPayment.card.cvv);
  212 |     }
  213 |     
  214 |     // Step 4: Test Apple Pay / Google Pay (if available)
  215 |     const digitalWalletButtons = page.locator('[data-testid*="pay-button"]');
  216 |     const digitalWalletCount = await digitalWalletButtons.count();
  217 |     
  218 |     if (digitalWalletCount > 0) {
  219 |       // These would typically trigger browser APIs
  220 |       // For testing, we just verify they're present
  221 |       expect(digitalWalletCount).toBeGreaterThan(0);
```