# Test info

- Name: Auth Integration >> should clear user data on logout
- Location: C:\Users\henry\OneDrive\Documents\uni\ICT-S4\COMP3036\Major\comp3036b2c\tests\e2e\auth\auth-integration.spec.ts:83:7

# Error details

```
TimeoutError: page.goto: Timeout 10000ms exceeded.
Call log:
  - navigating to "http://localhost:3000/", waiting until "load"

    at C:\Users\henry\OneDrive\Documents\uni\ICT-S4\COMP3036\Major\comp3036b2c\tests\e2e\auth\auth-integration.spec.ts:9:16
```

# Page snapshot

```yaml
- banner:
  - navigation:
    - link "CLOOOOTHES":
      - /url: /
      - paragraph: CLOOOOTHES
    - textbox "Search products..."
    - link "Shopping Cart":
      - /url: /cart
      - img "Shopping Cart"
    - link "Login":
      - /url: /login
- main:
  - paragraph: Loading products...
- contentinfo:
  - contentinfo:
    - heading "CLOOOOTHES" [level=3]
    - paragraph: Discover the latest trends in fashion with our curated collections for men, women, and kids.
    - link "Facebook":
      - /url: "#"
    - link "Instagram":
      - /url: "#"
    - link "Twitter":
      - /url: "#"
    - heading "Shop" [level=3]
    - list:
      - listitem:
        - link "Shop our collection.":
          - /url: /
    - heading "Support" [level=3]
    - list:
      - listitem:
        - link "Contact Us":
          - /url: /contact
      - listitem:
        - link "FAQ":
          - /url: /faq
      - listitem:
        - link "Shipping & Returns":
          - /url: /shipping
      - listitem:
        - link "Size Guide":
          - /url: /size-guide
      - listitem:
        - link "Track Order":
          - /url: /track-order
    - heading "Contact" [level=3]
    - paragraph:
      - img
      - text: 123 Fashion Street, London, UK
    - paragraph:
      - img
      - text: +44 1234 567890
    - paragraph:
      - img
      - text: support@ecommercetype.com
    - text: VISA MC AMEX PayPal Apple
    - paragraph: Â© 2025 E-Commerce Type Shii. All rights reserved.
    - link "Privacy Policy":
      - /url: /privacy
    - link "Terms of Service":
      - /url: /terms
    - link "Returns Policy":
      - /url: /returns
- alert
- button "Open Next.js Dev Tools":
  - img
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { AuthHelper } from './auth-helper';
   3 |
   4 | test.describe('Auth Integration', () => {
   5 |   let authHelper: AuthHelper;
   6 |
   7 |   test.beforeEach(async ({ page }) => {
   8 |     authHelper = new AuthHelper(page);
>  9 |     await page.goto('/');
     |                ^ TimeoutError: page.goto: Timeout 10000ms exceeded.
  10 |   });
  11 |   test('should add items to cart only when logged in', async ({ page }) => {
  12 |     // Try to add item to cart without login
  13 |     await page.locator('.product-card').first().click();
  14 |     await page.click('text=Add to Cart');
  15 |     
  16 |     // Should redirect to login
  17 |     await expect(page).toHaveURL(/.*login.*/);
  18 |     
  19 |     // Login and try again
  20 |     await authHelper.loginAsCustomer();
  21 |     await page.goto('/');
  22 |     
  23 |     // Now should be able to add to cart
  24 |     await page.locator('.product-card').first().click();
  25 |     await page.click('text=Add to Cart');
  26 |     
  27 |     // Should show success message or update cart count
  28 |     await expect(page.locator('text=Added to cart')).toBeVisible();
  29 |   });
  30 |   test('should persist cart items after login', async ({ page }) => {
  31 |     // Login first
  32 |     await authHelper.loginAsCustomer();
  33 |     
  34 |     // Add item to cart
  35 |     await page.locator('.product-card').first().click();
  36 |     await page.click('text=Add to Cart');
  37 |     
  38 |     // Logout and login again
  39 |     await authHelper.logout();
  40 |     await authHelper.loginAsCustomer();
  41 |     
  42 |     // Cart should still have items
  43 |     await page.goto('/cart');
  44 |     await expect(page.locator('.cart-item')).toHaveCount(1);
  45 |   });
  46 |
  47 |   test('should show admin products page for admin user', async ({ page }) => {
  48 |     await authHelper.loginAsAdmin();
  49 |     
  50 |     // Should see admin link
  51 |     await authHelper.expectAdminAccess();
  52 |     
  53 |     // Navigate to admin products
  54 |     await page.click('text=Admin');
  55 |     await page.click('text=Products');
  56 |     
  57 |     await expect(page).toHaveURL('/admin/products');
  58 |     await expect(page.locator('h1')).toContainText('Products');
  59 |   });
  60 |
  61 |   test('should show user-specific orders', async ({ page }) => {
  62 |     await authHelper.loginAsCustomer();
  63 |     
  64 |     // Navigate to orders (if this exists in your app)
  65 |     await page.goto('/login?view=orders');
  66 |     
  67 |     // Should show orders page without redirecting
  68 |     await expect(page.locator('text=Orders')).toBeVisible();
  69 |   });  test('should maintain shopping session across login', async ({ page }) => {
  70 |     // Browse products without login
  71 |     await page.goto('/search?q=shirt');
  72 |     const productCount = await page.locator('.product-card').count();
  73 |     expect(productCount).toBeGreaterThan(0);
  74 |     
  75 |     // Login
  76 |     await authHelper.loginAsCustomer();
  77 |     
  78 |     // Should return to search results
  79 |     await expect(page).toHaveURL(/.*search.*shirt.*/);
  80 |     const newProductCount = await page.locator('.product-card').count();
  81 |     expect(newProductCount).toBeGreaterThan(0);
  82 |   });
  83 |   test('should clear user data on logout', async ({ page }) => {
  84 |     await authHelper.loginAsCustomer();
  85 |     
  86 |     // Add item to cart
  87 |     await page.locator('.product-card').first().click();
  88 |     await page.click('text=Add to Cart');
  89 |     
  90 |     // Logout
  91 |     await authHelper.logout();
  92 |     
  93 |     // Cart should be empty for next user
  94 |     await authHelper.loginAsAdmin();
  95 |     await page.goto('/cart');
  96 |     await expect(page.locator('.cart-item')).toHaveCount(0);
  97 |   });
  98 | });
  99 |
```